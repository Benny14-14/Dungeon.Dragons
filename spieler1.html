<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spieler | D&D</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <h1>Willkommen, Spieler!</h1>

    <div class="bar-container">
        <p>‚ù§Ô∏è HP: <span id="hp-text">100 / 100</span></p>
        <div class="bar">
            <div id="hp-bar"></div>
        </div>
    </div>

    <div class="bar-container">
        <p>üîµ Mana: <span id="mana-text">50 / 50</span></p>
        <div class="bar">
            <div id="mana-bar"></div>
        </div>
    </div>

    <button onclick="takeDamage(20)">Schaden: -20 HP</button>
    <button onclick="useMana(10)">Mana verbrauchen: -10</button>
    <button onclick="heal(15)">Heilen: +15 HP</button>
    <button onclick="restoreMana(10)">Mana regenerieren: +10</button>

    <script src="script.js"></script>
    
    <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
    <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
    <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
    <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>


    <table id="data-table" border="1">
        <thead>
            <tr>
                <th>Name</th>
                <th>HP</th>
                <th>Mana</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <script>
        // Google Sheets CSV-URL f√ºr Spieler 1
        const SHEET_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTx46hOTOnttDbdtc2kMYyiXZA__d0v5vOqWSfj-W4e3S8g5bP_HoxOd7gdvJDZTuWqP6v6ZfZ_z8k9/pub?gid=1526898814&single=true&output=csv";

        async function fetchData() {
            const response = await fetch(SHEET_URL);
            const data = await response.text();
            updateTable(data);
        }

        function updateTable(csvText) {
            const rows = csvText.split("\n").map(row => row.split(","));
            const tableBody = document.querySelector("#data-table tbody");
            tableBody.innerHTML = "";

            rows.forEach(row => {
                let tr = document.createElement("tr");
                row.forEach(cell => {
                    let td = document.createElement("td");
                    td.textContent = cell;
                    tr.appendChild(td);
                });
                tableBody.appendChild(tr);
            });
        }

        // Daten einmal laden und alle 10 Sekunden aktualisieren
        fetchData();
        setInterval(fetchData, 10000);
    </script>
</body>
</html>
